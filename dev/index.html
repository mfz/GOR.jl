<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Home · GorJulia.jl</title><link rel="canonical" href="https://mfz.github.io/GorJulia.jl/"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">GorJulia.jl</span></div><form class="docs-search" action="search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>Home</a><ul class="internal"><li><a class="tocitem" href="#Purpose"><span>Purpose</span></a></li><li><a class="tocitem" href="#I/O"><span>I/O</span></a></li><li><a class="tocitem" href="#Operations-on-streams"><span>Operations on streams</span></a></li><li><a class="tocitem" href="#Grouping"><span>Grouping</span></a></li><li><a class="tocitem" href="#Index"><span>Index</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Home</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Home</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/mfz/GorJulia.jl/blob/master/docs/src/index.md#L" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="GorJulia.jl-Documentation"><a class="docs-heading-anchor" href="#GorJulia.jl-Documentation">GorJulia.jl Documentation</a><a id="GorJulia.jl-Documentation-1"></a><a class="docs-heading-anchor-permalink" href="#GorJulia.jl-Documentation" title="Permalink"></a></h1><ul><li><a href="#GorJulia.jl-Documentation">GorJulia.jl Documentation</a></li><ul><li><a href="#Purpose">Purpose</a></li><li><a href="#I/O">I/O</a></li><li><a href="#Operations-on-streams">Operations on streams</a></li><li><a href="#Grouping">Grouping</a></li><li><a href="#Index">Index</a></li></ul><li><a href="iterators/#Implementation-of-iterators">Implementation of iterators</a></li></ul><h2 id="Purpose"><a class="docs-heading-anchor" href="#Purpose">Purpose</a><a id="Purpose-1"></a><a class="docs-heading-anchor-permalink" href="#Purpose" title="Permalink"></a></h2><p>GorJulia is a Julia library to operate on genome ordered streams. Elements of genome ordered streams are sorted by chromosome and position, the first two items of each row element. Streaming allows operations on data sets that are larger than available memory, and genomic order speeds up relational operations like joins.</p><p>GorJulia supports the <code>Tables.jl</code> interface. This means it works with all sources and sinks that conform to the <code>Tables.jl</code> interface, e.g.</p><ul><li>CSV files,</li><li>SQLite3 tables,</li><li>Parquet files,</li><li>and DataFrames,</li></ul><p>and are ordered by chromosome and position.</p><p>GorJulia allows creation of complex pipelines by joining together operators using the <code>|&gt;</code> syntax. Each operator is implemented as a Julia iterator that is parameterized on input and output types. This allows for easy extension of the library by user-defined operations.</p><h2 id="I/O"><a class="docs-heading-anchor" href="#I/O">I/O</a><a id="I/O-1"></a><a class="docs-heading-anchor-permalink" href="#I/O" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="GorJulia.GorFile-Tuple{Any}" href="#GorJulia.GorFile-Tuple{Any}"><code>GorJulia.GorFile</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">GorFile(path; delim = &quot;	&quot;, limit = 10_000, first = nothing, last = nothing)</code></pre><p>Open gor file at <code>path</code> as genome ordered stream.</p><p>A gor file is a tab-delimited file with header with first two columns corresponding to Chrom and Pos. The file needs to be sorted by (Chrom, Pos),  using e.g. unix command <code>sort -k1,1 -k2,2n</code>.</p><p><strong>Arguments</strong></p><ul><li>path: path to file</li><li>delim: file delimiter</li><li>limit: number of rows to use for type inference</li><li>first: first coordinate to report (chrom, pos) or <code>nothing</code></li><li>last:  last coordinate to report (chrom, pos) or <code>nothing</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mfz/GorJulia.jl/blob/45035913e01c516211cb611f07be328aaa3ee3f9/src/gorfile.jl#LL53-L69">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="GorJulia.write_gor-Tuple{Any,Any}" href="#GorJulia.write_gor-Tuple{Any,Any}"><code>GorJulia.write_gor</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">write_gor(rows, path)
rows |&gt; write_gor(path)</code></pre><p>Write genome ordered stream <code>rows</code> as tab-delimited text file.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mfz/GorJulia.jl/blob/45035913e01c516211cb611f07be328aaa3ee3f9/src/gorfile.jl#LL96-L101">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="GorJulia.GorzFile-Tuple{Any}" href="#GorJulia.GorzFile-Tuple{Any}"><code>GorJulia.GorzFile</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">GorzFile(path; limit = 10_000, first = nothing, last = nothing)</code></pre><p>Open compressed gor file (.gorz) at <code>path</code> as genome ordered stream.</p><p>Use up to <code>limit</code> number of rows for type inference. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mfz/GorJulia.jl/blob/45035913e01c516211cb611f07be328aaa3ee3f9/src/gorfile.jl#LL179-L185">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="GorJulia.ParquetFile-Tuple{Any}" href="#GorJulia.ParquetFile-Tuple{Any}"><code>GorJulia.ParquetFile</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">ParquetFile(path)</code></pre><p>Open Parquet file at <code>path</code> as genome ordered stream.</p><p>This uses implementation in Parquet.jl, which is not very mature yet. Iterator struct contains state, so best to use  <code>data = () -&gt; ParquetFile(&quot;data.parquet&quot;)</code>. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mfz/GorJulia.jl/blob/45035913e01c516211cb611f07be328aaa3ee3f9/src/parquetfile.jl#LL19-L27">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="GorJulia.write_parquet-Tuple{Any,Any}" href="#GorJulia.write_parquet-Tuple{Any,Any}"><code>GorJulia.write_parquet</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">write_parquet(rows, path)
rows |&gt; write_parquet(path)</code></pre><p>Write genome ordered stream <code>rows</code> as Parquet file to <code>path</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mfz/GorJulia.jl/blob/45035913e01c516211cb611f07be328aaa3ee3f9/src/parquetfile.jl#LL38-L43">source</a></section></article><h2 id="Operations-on-streams"><a class="docs-heading-anchor" href="#Operations-on-streams">Operations on streams</a><a id="Operations-on-streams-1"></a><a class="docs-heading-anchor-permalink" href="#Operations-on-streams" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="GorJulia.verifyorder-Tuple{Any}" href="#GorJulia.verifyorder-Tuple{Any}"><code>GorJulia.verifyorder</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">verifyorder(rows)
rows |&gt; verifyorder</code></pre><p>Verify order of genome ordered stream <code>rows</code>.</p><p>An iterator that checks if its input is ordered by <code>(elt[1], elt[2])</code>. The iterator passes the input rows through, but throws an <code>ErrorException</code> if rows are out of order.  </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mfz/GorJulia.jl/blob/45035913e01c516211cb611f07be328aaa3ee3f9/src/verifyorder.jl#LL9-L18">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="GorJulia.select-Tuple{Any,Vararg{Symbol,N} where N}" href="#GorJulia.select-Tuple{Any,Vararg{Symbol,N} where N}"><code>GorJulia.select</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">select(rows, columns::Symbol...)
rows |&gt; select(columns::Symbol...)</code></pre><p>Select <code>columns</code> from genome ordered stream <code>rows</code>. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mfz/GorJulia.jl/blob/45035913e01c516211cb611f07be328aaa3ee3f9/src/select.jl#LL28-L33">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="GorJulia.gorfilter-Tuple{Any,Any}" href="#GorJulia.gorfilter-Tuple{Any,Any}"><code>GorJulia.gorfilter</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">gorfilter(rows, predicate)
rows |&gt; gorfilter(predicate)</code></pre><p>Filter <code>rows</code> to include only rows that fulfil <code>predicate</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mfz/GorJulia.jl/blob/45035913e01c516211cb611f07be328aaa3ee3f9/src/filter.jl#LL10-L15">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="GorJulia.rename-Tuple{Any,Vararg{Pair,N} where N}" href="#GorJulia.rename-Tuple{Any,Vararg{Pair,N} where N}"><code>GorJulia.rename</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">rename(rows, args::Pair...)
rows |&gt; rename(args::Pairs...)</code></pre><p>Rename columns in genome ordered stream <code>rows</code>.  Old and new column names are specified as <code>:oldcol =&gt; :newcol</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mfz/GorJulia.jl/blob/45035913e01c516211cb611f07be328aaa3ee3f9/src/rename.jl#LL16-L22">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="GorJulia.mutate-Tuple{Any,Tuple,Any}" href="#GorJulia.mutate-Tuple{Any,Tuple,Any}"><code>GorJulia.mutate</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">mutate(rows, cols::Tuple, func)
mutate(rows, col::Symbol, func)
rows |&gt; mutate(cols::Tuple, func)
rows |&gt; mutate(col::Symbol, func)</code></pre><p>Add or replace columns <code>cols</code> computed as <code>cols = func(row)</code> to genome ordered stream <code>rows</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mfz/GorJulia.jl/blob/45035913e01c516211cb611f07be328aaa3ee3f9/src/mutate.jl#LL15-L22">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="GorJulia.gormerge-Tuple{Any,Any}" href="#GorJulia.gormerge-Tuple{Any,Any}"><code>GorJulia.gormerge</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">gormerge(left, right)
left |&gt; gormerge(right)</code></pre><p>Merge <code>left</code> and <code>right</code> genome ordered streams.</p><p>Output stream contains union of columns with type promotion</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mfz/GorJulia.jl/blob/45035913e01c516211cb611f07be328aaa3ee3f9/src/merge.jl#LL29-L36">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="GorJulia.gormap-Tuple{Any,Any}" href="#GorJulia.gormap-Tuple{Any,Any}"><code>GorJulia.gormap</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">gormap(rows, func)
rows |&gt; gormap(func)</code></pre><p>Apply function <code>func</code> to elements of genome ordered stream <code>rows</code>. The function <code>func</code> should return a <code>NamedTuple</code>.</p><p>NOTE: Julia cannot infer the type of NamedTuples with <code>Union{Missing,T}</code>. This means that if the input stream <code>rows</code> has columns of type <code>Union{Missing,T}</code>, the pipeline probably fails. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mfz/GorJulia.jl/blob/45035913e01c516211cb611f07be328aaa3ee3f9/src/map.jl#LL13-L23">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="GorJulia.gorjoin-Tuple{Any,Any}" href="#GorJulia.gorjoin-Tuple{Any,Any}"><code>GorJulia.gorjoin</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">gorjoin(left, right; kind = :snpsnp, leftjoin = false, window = 0)

left |&gt; gorjoin(right; kind = :snpsnp, leftjoin = false, window = 0)</code></pre><p>Join genome ordered streams <code>left</code> and <code>right</code> on <code>(elt[1], elt[2])</code>.</p><p><strong>Arguments</strong></p><ul><li><code>leftjoin::Bool</code>: should left join be performed</li><li><code>kind::Symbol</code>: how should overlap be determined (:snpsnp, :snpseg, :segsnp, :segseg)</li><li><code>window::Int</code>: allow <code>window</code> base pairs difference in position   </li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mfz/GorJulia.jl/blob/45035913e01c516211cb611f07be328aaa3ee3f9/src/join2.jl#LL81-L94">source</a></section></article><h2 id="Grouping"><a class="docs-heading-anchor" href="#Grouping">Grouping</a><a id="Grouping-1"></a><a class="docs-heading-anchor-permalink" href="#Grouping" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="GorJulia.groupby" href="#GorJulia.groupby"><code>GorJulia.groupby</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">rows |&gt; groupby(n=0, groupcols = []; aggregates...)</code></pre><p>Group genome ordered stream by position window and <code>groupcols</code>. Summarize groups using <code>aggregates</code>.</p><p>For each window and combination of grouping columns, compute the online-statistics specified.</p><p><strong>Arguments</strong></p><ul><li><code>n::Int</code> : group by window of size <code>n</code>, genomewide for <code>n=0</code></li><li><code>groupcols::Vector{Symbol}</code>: additional grouping columns</li><li><code>aggregates</code> : online statistics to compute </li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mfz/GorJulia.jl/blob/45035913e01c516211cb611f07be328aaa3ee3f9/src/groupby.jl#LL61-L73">source</a></section></article><p>Currently the following aggregators are implemented. See <code>OnlineStats.jl</code> for more ideas.</p><article class="docstring"><header><a class="docstring-binding" id="GorJulia.Sum" href="#GorJulia.Sum"><code>GorJulia.Sum</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">Sum(column::Symbol, val = 0.0)</code></pre><p>Aggregator for sum of <code>column</code>. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mfz/GorJulia.jl/blob/45035913e01c516211cb611f07be328aaa3ee3f9/src/aggregate.jl#LL31-L35">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="GorJulia.Count" href="#GorJulia.Count"><code>GorJulia.Count</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">Count()</code></pre><p>Aggregator for count.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mfz/GorJulia.jl/blob/45035913e01c516211cb611f07be328aaa3ee3f9/src/aggregate.jl#LL49-L53">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="GorJulia.Avg-Tuple{Symbol}" href="#GorJulia.Avg-Tuple{Symbol}"><code>GorJulia.Avg</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">Avg(column::Symbol)</code></pre><p>Aggregator for average of <code>column</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mfz/GorJulia.jl/blob/45035913e01c516211cb611f07be328aaa3ee3f9/src/aggregate.jl#LL81-L85">source</a></section></article><h2 id="Index"><a class="docs-heading-anchor" href="#Index">Index</a><a id="Index-1"></a><a class="docs-heading-anchor-permalink" href="#Index" title="Permalink"></a></h2><ul><li><a href="#GorJulia.Avg-Tuple{Symbol}"><code>GorJulia.Avg</code></a></li><li><a href="#GorJulia.Count"><code>GorJulia.Count</code></a></li><li><a href="#GorJulia.GorzFile-Tuple{Any}"><code>GorJulia.GorzFile</code></a></li><li><a href="#GorJulia.Sum"><code>GorJulia.Sum</code></a></li><li><a href="#GorJulia.GorFile-Tuple{Any}"><code>GorJulia.GorFile</code></a></li><li><a href="#GorJulia.ParquetFile-Tuple{Any}"><code>GorJulia.ParquetFile</code></a></li><li><a href="#GorJulia.gorfilter-Tuple{Any,Any}"><code>GorJulia.gorfilter</code></a></li><li><a href="#GorJulia.gorjoin-Tuple{Any,Any}"><code>GorJulia.gorjoin</code></a></li><li><a href="#GorJulia.gormap-Tuple{Any,Any}"><code>GorJulia.gormap</code></a></li><li><a href="#GorJulia.gormerge-Tuple{Any,Any}"><code>GorJulia.gormerge</code></a></li><li><a href="#GorJulia.groupby"><code>GorJulia.groupby</code></a></li><li><a href="#GorJulia.mutate-Tuple{Any,Tuple,Any}"><code>GorJulia.mutate</code></a></li><li><a href="#GorJulia.rename-Tuple{Any,Vararg{Pair,N} where N}"><code>GorJulia.rename</code></a></li><li><a href="#GorJulia.select-Tuple{Any,Vararg{Symbol,N} where N}"><code>GorJulia.select</code></a></li><li><a href="#GorJulia.verifyorder-Tuple{Any}"><code>GorJulia.verifyorder</code></a></li><li><a href="#GorJulia.write_gor-Tuple{Any,Any}"><code>GorJulia.write_gor</code></a></li><li><a href="#GorJulia.write_parquet-Tuple{Any,Any}"><code>GorJulia.write_parquet</code></a></li></ul></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Saturday 12 December 2020 17:39">Saturday 12 December 2020</span>. Using Julia version 1.5.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
